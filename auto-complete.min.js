!function t(e,i,s){function o(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return o(i?i:t)},h,h.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,e,i){tui.util.defineNamespace("tui.component.AutoComplete",t("./src/js/AutoComplete"))},{"./src/js/AutoComplete":2}],2:[function(t,e,i){"use strict";var s=t("./manager/data"),o=t("./manager/input"),n=t("./manager/result"),a=tui.util.defineClass({flowMap:{NEXT:"next",PREV:"prev",FIRST:"first",LAST:"last"},watchInterval:200,init:function(t){var e,i="_atcp_use_cookie";this.options={},this._checkValidation(t)&&(this.options.toggleImg&&this.options.onoffTextElement?(e=$.cookie(this.options.cookieName),this.isUse=!("use"!==e&&e)):(this.isUse=!0,delete this.options.onoffTextElement),this.options.cookieName||(this.options.cookieName=i),tui.util.isExisty(this.options.watchInterval)||(this.options.watchInterval=this.watchInterval),this.dataManager=new s(this,this.options),this.inputManager=new o(this,this.options),this.resultManager=new n(this,this.options),this.querys=null,this.isIdle=!0,this.setToggleBtnImg(this.isUse),this.setCookieValue(this.isUse))},_checkValidation:function(t){var e,i,s,o,n,a,r,l;if(e=t.config,!tui.util.isExisty(e))throw new Error("Config file is not avaliable. #"+e);for(i=tui.util.keys(e),s=i.length,n=["resultListElement","searchBoxElement","orgQueryElement","subQuerySet","template","listConfig","actions","formElement","searchUrl"],a=[],o=0;s>o;o+=1)tui.util.inArray(i[o],n,0)>=0&&a.push(i[o]);for(tui.util.forEach(n,function(t){if(-1===tui.util.inArray(t,a,0))throw new Error(t+"does not not exist.")}),o=0;s>o;o+=1)r=i[o],l=e[r],"string"!=typeof l||"."!==l.charAt(0)&&"#"!==l.charAt(0)?this.options[r]=e[r]:this.options[r]=$(l);return!0},request:function(t){this.dataManager.request(t)},getValue:function(){return this.inputManager.getValue()},setValue:function(t){this.inputManager.setValue(t)},setParams:function(t,e){this.inputManager.setParams(t,e)},setServerData:function(t){this.resultManager.draw(t)},setCookieValue:function(t){$.cookie(this.options.cookieName,t?"use":"notUse"),this.isUse=t,this.setToggleBtnImg(t)},setQuerys:function(t){this.querys=[].concat(t)},isUseAutoComplete:function(){return this.isUse},isShowResultList:function(){return this.resultManager.isShowResultList()},setToggleBtnImg:function(t){this.inputManager.setToggleBtnImg(t)},hideResultList:function(){this.isUseAutoComplete()&&this.resultManager.hideResultList()},showResultList:function(){this.isUseAutoComplete()&&this.resultManager.showResultList()},moveNextList:function(t){this.resultManager.moveNextList(t)},changeOnOffText:function(t){this.resultManager.changeOnOffText(t)},getMoved:function(){return this.resultManager.isMoved},setMoved:function(t){this.resultManager.isMoved=t},setSearchApi:function(t){tui.util.extend(this.options.searchApi,t)},clearReadyValue:function(){tui.util.isExisty(this.readyValue)?this.request(this.readyValue):this.isIdle=!0,this.readyValue=null}});tui.util.CustomEvents.mixin(a),e.exports=a},{"./manager/data":3,"./manager/input":4,"./manager/result":5}],3:[function(t,e,i){"use strict";var s=tui.util.defineClass({init:function(t,e){return 2!==arguments.length?void alert("argument length error !"):(this.autoCompleteObj=t,void(this.options=e))},request:function(t){var e,i,s,o=t.replace(/\s/g,"");return t&&o?(e={q:t,r_enc:"UTF-8",q_enc:"UTF-8",r_format:"json",_callback:"dataCallback"},i=tui.util.extend(this.options.searchApi,e),void $.ajax(this.options.searchUrl,{dataType:"jsonp",jsonpCallback:"dataCallback",data:i,type:"get",success:tui.util.bind(function(t){try{s=this._getCollectionData(t),this.autoCompleteObj.setQuerys(t.query),this.autoCompleteObj.setServerData(s),this.autoCompleteObj.clearReadyValue()}catch(e){throw new Error("[DataManager] Request faild.",e)}},this)})):void this.autoCompleteObj.hideResultList()},_getCollectionData:function(t){var e=t.collections,i=[];return tui.util.forEach(e,function(t){var e;tui.util.isEmpty(t.items)||(e=this._getRedirectData(t),i.push({type:"title",values:[t.title]}),i=i.concat(e))},this),i},_getRedirectData:function(t){var e=t.type,i=t.index,s=t.destination,o=[];return tui.util.forEachArray(t.items,function(t,n){n<=this.options.viewCount-1&&o.push({values:t,type:e,index:i,dest:s})},this),o}});e.exports=s},{}],4:[function(t,e,i){"use strict";var s=tui.util.defineClass({keyCodeMap:{TAB:9,UP_ARROW:38,DOWN_ARROW:40},init:function(t,e){return 2!==arguments.length?void alert("argument length error !"):(this.autoCompleteObj=t,this.options=e,this.$searchBox=this.options.searchBoxElement,this.$toggleBtn=this.options.toggleBtnElement,this.$orgQuery=this.options.orgQueryElement,this.$formElement=this.options.formElement,this.inputValue=this.$searchBox.val(),void this._attachEvent())},getValue:function(){return this.$searchBox.val()},setValue:function(t){this.inputValue=t,this.$searchBox.val(t)},setParams:function(t,e){var i=this.options,s=i.listConfig[e],o=i.staticParams[s.staticParams];t&&tui.util.isString(t)&&(t=t.split(",")),(t&&!tui.util.isEmpty(t)||tui.util.isExisty(o))&&this._createParamSetByType(t,e)},_createParamSetByType:function(t,e){var i=this.options,s=i.listConfig[e],o=i.subQuerySet[s.subQuerySet],n=i.staticParams[s.staticParams];this.hiddens||this._createParamContainer(),tui.util.forEach(t,function(t,e){var i=o[e];this.hiddens.append($('<input type="hidden" name="'+i+'" value="'+t+'" />'))},this),n&&this._createStaticParams(n)},_createStaticParams:function(t){t=t.split(","),tui.util.forEach(t,function(t){var e=t.split("=");this.hiddens.append($('<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />'))},this)},_createParamContainer:function(){this.hiddens=$('<div class="hidden-inputs"></div>'),this.hiddens.hide(),this.hiddens.appendTo($(this.$formElement))},setToggleBtnImg:function(t){this.options.toggleImg&&this.$toggleBtn&&(t?this.$toggleBtn.attr("src",this.options.toggleImg.on):this.$toggleBtn.attr("src",this.options.toggleImg.off))},_attachEvent:function(){this.$searchBox.bind("focus keyup keydown blur click",$.proxy(function(t){switch(t.type){case"focus":this._onFocus();break;case"blur":this._onBlur(t);break;case"keyup":this._onKeyUp(t);break;case"keydown":this._onKeyDown(t);break;case"click":this._onClick()}},this)),this.$toggleBtn&&this.$toggleBtn.bind("click",$.proxy(function(){this._onClickToggle()},this))},_setOrgQuery:function(t){this.$orgQuery.val(t)},_onClick:function(){return this.autoCompleteObj.getValue()&&this.autoCompleteObj.isUseAutoComplete()?(this.autoCompleteObj.isShowResultList()?this.autoCompleteObj.hideResultList():this.autoCompleteObj.showResultList(),!0):!1},_onFocus:function(){this.intervalId=setInterval($.proxy(function(){this._onWatch()},this),this.options.watchInterval)},_onWatch:function(){""===this.$searchBox.val()&&(this._setOrgQuery(""),this.autoCompleteObj.setMoved(!1)),this.inputValue!==this.$searchBox.val()?(this.inputValue=this.$searchBox.val(),this._onChange()):this.autoCompleteObj.getMoved()||this._setOrgQuery(this.$searchBox.val())},_onKeyUp:function(){this.inputValue!==this.$searchBox.val()&&(this.inputValue=this.$searchBox.val(),this._onChange())},_onChange:function(){this.autoCompleteObj.isUseAutoComplete()&&(this.autoCompleteObj.isIdle?(this.autoCompleteObj.isIdle=!1,this.autoCompleteObj.request(this.$searchBox.val())):this.autoCompleteObj.readyValue=this.$searchBox.val())},_onBlur:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},_onKeyDown:function(t){var e,i,s,o,n=this.autoCompleteObj;if(n.isUseAutoComplete()&&n.isShowResultList()){if(e=t.keyCode,i=null,s=this.keyCodeMap,o=n.flowMap,e===s.TAB)t.preventDefault(),i=t.shiftKey?o.NEXT:o.PREV;else if(e===s.DOWN_ARROW)i=o.NEXT;else{if(e!==s.UP_ARROW)return;i=o.PREV}n.moveNextList(i)}},_onClickToggle:function(){this.autoCompleteObj.isUseAutoComplete()?(this.autoCompleteObj.hideResultList(),this.setToggleBtnImg(!1),this.autoCompleteObj.setCookieValue(!1),this.autoCompleteObj.changeOnOffText(!0)):(this.setToggleBtnImg(!0),this.autoCompleteObj.setCookieValue(!0),this.autoCompleteObj.changeOnOffText(!1))}});e.exports=s},{}],5:[function(t,e,i){"use strict";var s=tui.util.defineClass({init:function(t,e){this.autoCompleteObj=t,this.options=e,this.$resultList=this.options.resultListElement,this.resultSelector=this.options.resultListElement,this.viewCount=this.options.viewCount||10,this.$onOffTxt=this.options.onoffTextElement,this.mouseOverClass=this.options.mouseOverClass,this.flowMap=this.autoCompleteObj.flowMap,this._attachEvent(),this.selectedElement=null,this.isMoved=!1},_deleteBeforeElement:function(){this.$resultList.html(""),this.$resultList.hide(),this.selectedElement=null},draw:function(t){var e=t.length;this._deleteBeforeElement(),1>e?this._hideBottomArea():this._makeResultList(t,e),this.$resultList.show(),this._showBottomArea()},_makeResultList:function(t,e){var i,s,o,n,a,r,l=this.options.template,u=this.options.listConfig,h=this.options.useTitle&&!!l.title;for(r=0;e>r;r+=1)o=t[r].type,s=t[r].index,i=u[s]?l[u[s].template]:l.defaults,("title"!==o||(i=l.title,h))&&(n=this._getTmplData(i.attr,t[r]),a=$(this._applyTemplate(i.element,n)),a.attr("data-params",n.params),a.attr("data-index",s),this.$resultList.append(a))},_getTmplData:function(t,e){var i={},s=e.values||null;return tui.util.isString(e)?(i[t[0]]=e,i):(tui.util.forEach(t,function(t,e){i[t]=s[e]}),t.length<s.length&&(i.params=s.slice(t.length)),i)},isShowResultList:function(){return"block"===this.$resultList.css("display")},hideResultList:function(){this.$resultList.css("display","none"),this._hideBottomArea(),this.autoCompleteObj.isIdle=!0,this.autoCompleteObj.fire("close")},showResultList:function(){var t=this;setTimeout(function(){t.$resultList.css("display","block")},0),this._showBottomArea()},moveNextList:function(t){var e,i=this.flowMap,s=this.selectedElement,o=t===i.NEXT?this._getNext:this._getPrev,n=t===i.NEXT?this._getFirst:this._getLast;this.isMoved=!0,s?(s.removeClass(this.mouseOverClass),s=this.selectedElement=o.call(this,s)):s=this.selectedElement=n.call(this),e=s.find(".keyword-field").text(),s&&e?(s.addClass(this.mouseOverClass),this.autoCompleteObj.setValue(e),this._setSubmitOption()):s&&this.moveNextList(t)},changeOnOffText:function(t){t?(this.$onOffTxt.text("자동완성 켜기"),this.hideResultList()):this.$onOffTxt.text("자동완성 끄기")},_attachEvent:function(){this.$resultList.bind("mouseover click",$.proxy(function(t){"mouseover"===t.type?this._onMouseOver(t):"click"===t.type&&this._onClick(t)},this)),this.$onOffTxt&&this.$onOffTxt.bind("click",$.proxy(function(){this._useAutoComplete()},this)),$(document).bind("click",$.proxy(function(t){"html"===t.target.tagName.toLowerCase()&&this.hideResultList()},this))},_applyTemplate:function(t,e){var i,s={};return tui.util.forEach(e,function(o,n){e.propertyIsEnumerable(n)&&("subject"===n?s.subject=this._highlight(o):s[n]=o,t=t.replace(new RegExp("@"+i+"@","g"),s[i]))},this),t},_highlight:function(t){var e,i=this.autoCompleteObj.querys;return tui.util.forEach(i,function(i){e||(e=t),e=this._makeStrong(e,i)},this),e||t},_makeStrong:function(t,e){var i,s,o,n,a,r,l,u,h;if(!e||e.length<1)return t;for(i=new RegExp("[.*+?|()\\[\\]{}\\\\]","g"),s=e.replace(/()/g," ").replace(/^\s+|\s+$/g,""),o=s.match(/\S/g),n=o.length,a=[],r="",h=0,u=n;u>h;h+=1)a.push(o[h].replace(/[\S]+/g,"["+o[h].toLowerCase().replace(i,"\\$&")+"|"+o[h].toUpperCase().replace(i,"\\$&")+"] ").replace(/[\s]+/g,"[\\s]*"));return s="("+a.join("")+")",l=new RegExp(s),l.test(t)&&(r=t.replace(l,"<strong>"+RegExp.$1+"</strong>")),r},_getFirst:function(){return this._orderStage(this.flowMap.FIRST)},_getLast:function(){return this._orderStage(this.flowMap.LAST)},_orderStage:function(t){return t=t===this.flowMap.FIRST?"first":"last",this.$resultList&&this.$resultList.children()&&this.$resultList.children().length?this.$resultList.children()[t]():null},_getNext:function(t){return this._orderElement(this.flowMap.NEXT,t)},_getPrev:function(t){return this._orderElement(this.flowMap.PREV,t)},_orderElement:function(t,e){var i,s,o;return tui.util.isExisty(e)?(i=$(e),s=t===this.flowMap.NEXT,i.closest(this.resultSelector)?(o=s?e.next():e.prev(),o.length?o:s?this._getFirst():this._getLast()):null):null},_useAutoComplete:function(){var t=this.autoCompleteObj.isUseAutoComplete();this.changeOnOffText(t),this.autoCompleteObj.setCookieValue(!t)},_showBottomArea:function(){this.$onOffTxt&&this.$onOffTxt.show()},_hideBottomArea:function(){this.$onOffTxt&&this.$onOffTxt.hide()},_setSubmitOption:function(t){var e,i,s,o,n,a,r;this._clearSubmitOption(),e=this.options.formElement,i=t?$(t).closest("li"):$(this.selectedElement),s=this.options.actions,o=i.attr("data-index"),n=this.options.listConfig[o],a=s[n.action],$(e).attr("action",a),r=i.attr("data-params"),this.autoCompleteObj.setParams(r,o),this.autoCompleteObj.fire("change",{index:o,action:a,params:r})},_clearSubmitOption:function(){var t=this.options.formElement,e=$(t).find(".hidden-inputs");e.html("")},_onMouseOver:function(t){var e=$(t.target),i=this.$resultList.find("li"),s=e.closest("li");tui.util.forEachArray(i,function(t){$(t).removeClass(this.mouseOverClass)},this),s&&s.find(".keyword-field").length&&s.addClass(this.mouseOverClass),this.selectedElement=e},_onClick:function(t){var e=$(t.target),i=this.options.formElement,s=e.closest("li"),o=s.find(".keyword-field"),n=o.text();this.autoCompleteObj.setValue(n),i&&n&&(this._setSubmitOption(e),i.submit())}});e.exports=s},{}]},{},[1]);