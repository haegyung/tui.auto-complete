!function t(e,i,s){function o(a,u){if(!i[a]){if(!e[a]){var r="function"==typeof require&&require;if(!u&&r)return r(a,!0);if(n)return n(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var i=e[a][1][t];return o(i?i:t)},h,h.exports,t,e,i,s)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<s.length;a++)o(s[a]);return o}({1:[function(t,e,i){tui.util.defineNamespace("tui.component.AutoComplete",t("./src/js/AutoComplete"))},{"./src/js/AutoComplete":2}],2:[function(t,e,i){"use strict";var s=t("./manager/data"),o=t("./manager/input"),n=t("./manager/result"),a=["resultListElement","searchBoxElement","orgQueryElement","formElement","subQuerySet","template","listConfig","actions","searchUrl"],u="_atcp_use_cookie",r=/element/i,l=tui.util.defineClass({flowMap:{NEXT:"next",PREV:"prev",FIRST:"first",LAST:"last"},watchInterval:200,init:function(t){this.options={},this._checkValidation(t),this._setOptions(t),this.dataManager=new s(this,this.options),this.inputManager=new o(this,this.options),this.resultManager=new n(this,this.options),this.queries=null,this.isIdle=!0,this.setToggleBtnImg(this.isUse),this.setCookieValue(this.isUse)},_checkValidation:function(t){var e=tui.util.isExisty,i=t.config;if(!e(i))throw new Error("No configuration #"+i);tui.util.forEach(a,function(t){if(!e(i[t]))throw new Error(t+"does not not exist.")})},_setOptions:function(t){var e,i=t.config;i.toggleImg&&i.onoffTextElement?(e=$.cookie(i.cookieName),this.isUse=!("use"!==e&&e)):(this.isUse=!0,delete i.onoffTextElement),i.cookieName=i.cookieName||u,tui.util.isFalsy(i.watchInterval)||(i.watchInterval=this.watchInterval),tui.util.forEach(i,function(t,e){r.test(e)?this.options[e]=$(t):this.options[e]=t},this)},request:function(t){this.dataManager.request(t)},getValue:function(){return this.inputManager.getValue()},setValue:function(t){this.inputManager.setValue(t)},setParams:function(t,e){this.inputManager.setParams(t,e)},setServerData:function(t){this.resultManager.draw(t)},setCookieValue:function(t){$.cookie(this.options.cookieName,t?"use":"notUse"),this.isUse=t,this.setToggleBtnImg(t)},setQueries:function(t){this.queries=[].concat(t)},isUseAutoComplete:function(){return this.isUse},isShowResultList:function(){return this.resultManager.isShowResultList()},setToggleBtnImg:function(t){this.inputManager.setToggleBtnImg(t)},hideResultList:function(){this.isUseAutoComplete()&&this.resultManager.hideResultList()},showResultList:function(){this.isUseAutoComplete()&&this.resultManager.showResultList()},moveNextList:function(t){this.resultManager.moveNextList(t)},changeOnOffText:function(t){this.resultManager.changeOnOffText(t)},getMoved:function(){return this.resultManager.isMoved},setMoved:function(t){this.resultManager.isMoved=t},setSearchApi:function(t){tui.util.extend(this.options.searchApi,t)},clearReadyValue:function(){tui.util.isExisty(this.readyValue)?this.request(this.readyValue):this.isIdle=!0,this.readyValue=null}});tui.util.CustomEvents.mixin(l),e.exports=l},{"./manager/data":3,"./manager/input":4,"./manager/result":5}],3:[function(t,e,i){"use strict";var s="dataCallback",o="q",n={r_enc:"UTF-8",q_enc:"UTF-8",r_format:"json"},a=tui.util.forEach,u=tui.util.isEmpty,r=tui.util.defineClass({init:function(t,e){this.autoCompleteObj=t,this.options=e},request:function(t){var e,i=t.replace(/\s/g,""),a=this.autoCompleteObj;return t&&i?(n[o]=t,void $.ajax(this.options.searchUrl,{dataType:"jsonp",jsonpCallback:s,data:$.extend(this.options.searchApi,n),type:"get",success:$.proxy(function(t){try{e=this._getCollectionData(t),a.setQueries(t.query),a.setServerData(e),a.clearReadyValue()}catch(i){throw new Error("[DataManager] invalid response data.",i)}},this)})):void a.hideResultList()},_getCollectionData:function(t){var e=t.collections,i=[];return a(e,function(t){var e;u(t.items)||(e=this._getRedirectData(t),i.push({type:"title",values:[t.title]}),i=i.concat(e))},this),i},_getRedirectData:function(t){var e=t.type,i=t.index,s=t.destination,o=[],n=this.options.viewCount;return a(t.items,function(t,a){return a>=n?!1:void o.push({values:t,type:e,index:i,dest:s})},this),o}});e.exports=r},{}],4:[function(t,e,i){"use strict";var s=tui.util.defineClass({keyCodeMap:{TAB:9,UP_ARROW:38,DOWN_ARROW:40},init:function(t,e){this.autoCompleteObj=t,this.options=e,this.$searchBox=this.options.searchBoxElement,this.$toggleBtn=this.options.toggleBtnElement,this.$orgQuery=this.options.orgQueryElement,this.$formElement=this.options.formElement,this.inputValue=this.$searchBox.val(),this._attachEvent()},getValue:function(){return this.$searchBox.val()},setValue:function(t){this.$searchBox.val(t),this.inputValue=t},setParams:function(t,e){t&&tui.util.isString(t)&&(t=t.split(",")),t&&!tui.util.isEmpty(t)&&this._createParamSetByType(t,e)},_createParamSetByType:function(t,e){var i=this.options,s=i.listConfig[e],o=s.subQuerySet,n=s.staticParams,a=i.subQuerySet[o],u=i.staticParams[n];this.hiddens||this._createParamContainer(),tui.util.forEach(t,function(t,e){var i=a[e];this.hiddens.append($('<input type="hidden" name="'+i+'" value="'+t+'" />'))},this),this._createStaticParams(u)},_createStaticParams:function(t){t&&(t=t.split(","),tui.util.forEach(t,function(t){var e=t.split("=");this.hiddens.append($('<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />'))},this))},_createParamContainer:function(){this.hiddens=$('<div class="hidden-inputs"></div>').hide().appendTo(this.$formElement)},setToggleBtnImg:function(t){this.options.toggleImg&&this.$toggleBtn&&this.$toggleBtn.length&&(t?this.$toggleBtn.attr("src",this.options.toggleImg.on):this.$toggleBtn.attr("src",this.options.toggleImg.off))},_attachEvent:function(){this.$searchBox.on({focus:$.proxy(this._onFocus,this),blur:$.proxy(this._onBlur,this),keyup:$.proxy(this._onKeyUp,this),keydown:$.proxy(this._onKeyDown,this),click:$.proxy(this.click,this)}),this.$toggleBtn&&this.$toggleBtn.length&&this.$toggleBtn.on("click",$.proxy(this._onClickToggle,this))},_setOrgQuery:function(t){this.$orgQuery.val(t)},_onClick:function(){return this.autoCompleteObj.getValue()&&this.autoCompleteObj.isUseAutoComplete()?(this.autoCompleteObj.isShowResultList()?this.autoCompleteObj.hideResultList():this.autoCompleteObj.showResultList(),!0):!1},_onFocus:function(){this.intervalId=setInterval($.proxy(function(){this._onWatch()},this),this.options.watchInterval)},_onWatch:function(){var t=this.$searchBox.val();t||(this._setOrgQuery(""),this.autoCompleteObj.setMoved(!1)),this.inputValue!==t?(this.inputValue=t,this._onChange()):this.autoCompleteObj.getMoved()||this._setOrgQuery(t)},_onKeyUp:function(){var t=this.$searchBox.val();this.inputValue!==t&&(this.inputValue=t,this._onChange())},_onChange:function(){var t=this.autoCompleteObj;t.isUseAutoComplete()&&(t.isIdle?(t.isIdle=!1,t.request(this.$searchBox.val())):t.readyValue=this.$searchBox.val())},_onBlur:function(){clearInterval(this.intervalId),this.intervalId=null},_onKeyDown:function(t){var e,i,s,o=this.autoCompleteObj;if(o.isUseAutoComplete()&&o.isShowResultList()){switch(i=this.keyCodeMap,s=o.flowMap,t.keyCode){case i.TAB:t.preventDefault(),e=t.shiftKey?s.NEXT:s.PREV;break;case i.DOWN_ARROW:e=s.NEXT;break;case i.UP_ARROW:e=s.PREV;break;default:return}o.moveNextList(e)}},_onClickToggle:function(){this.autoCompleteObj.isUseAutoComplete()?(this.autoCompleteObj.hideResultList(),this.setToggleBtnImg(!1),this.autoCompleteObj.setCookieValue(!1),this.autoCompleteObj.changeOnOffText(!0)):(this.setToggleBtnImg(!0),this.autoCompleteObj.setCookieValue(!0),this.autoCompleteObj.changeOnOffText(!1))}});e.exports=s},{}],5:[function(t,e,i){"use strict";var s=10,o=tui.util.isEmpty,n=tui.util.map,a=/[\\^$.*+?()[\]{}|]/,u="/s+/g",r="[\\s]*",l=tui.util.defineClass({init:function(t,e){this.autoCompleteObj=t,this.options=e,this.$resultList=e.resultListElement,this.viewCount=e.viewCount||s,this.$onOffTxt=e.onoffTextElement,this.mouseOverClass=e.mouseOverClass,this.flowMap=t.flowMap,this._attachEvent(),this.$selectedElement=null,this.isMoved=!1},_deleteBeforeElement:function(){this.$resultList.hide().html(""),this.$selectedElement=null},draw:function(t){var e=t.length;this._deleteBeforeElement(),1>e?this._hideBottomArea():this._makeResultList(t,e),this.showResultList()},_makeResultList:function(t,e){var i,s,o,n,a,u=this.options.template,r=this.options.listConfig,l=this.options.useTitle&&!!u.title;for(n=0;e>n;n+=1)a=t[n],s=a.index,i=r[s]?u[r[s].template]:u.defaults,("title"!==a.type||(i=u.title,l))&&(o=this._getTmplData(i.attr,a),$(this._applyTemplate(i.element,o)).data({params:o.params,index:s}).appendTo(this.$resultList))},_getTmplData:function(t,e){var i={},s=e.values||null;return tui.util.isString(e)?(i[t[0]]=e,i):(tui.util.forEach(t,function(t,e){i[t]=s[e]}),t.length<s.length&&(i.params=s.slice(t.length)),i)},isShowResultList:function(){return"block"===this.$resultList.css("display")},hideResultList:function(){this.$resultList.hide(),this._hideBottomArea(),this.autoCompleteObj.isIdle=!0,this.autoCompleteObj.fire("close")},showResultList:function(){this.$resultList.show(),this._showBottomArea()},moveNextList:function(t){var e,i=this.flowMap,s=this.$selectedElement,n=t===i.NEXT?this._getNext:this._getPrev,a=t===i.NEXT?this._getFirst:this._getLast;this.isMoved=!0,o(s)?s=this.$selectedElement=a.call(this):(s.removeClass(this.mouseOverClass),s=this.$selectedElement=n.call(this,s)),e=s.find(".keyword-field").text(),e?(s.addClass(this.mouseOverClass),this.autoCompleteObj.setValue(e),this._setSubmitOption()):this.moveNextList(t)},changeOnOffText:function(t){t?(this.$onOffTxt.text("자동완성 켜기"),this.hideResultList()):this.$onOffTxt.text("자동완성 끄기")},_attachEvent:function(){this.$resultList.on({mouseover:$.proxy(this._onMouseOver,this),click:$.proxy(this._onClick,this)}),this.$onOffTxt&&this.$onOffTxt.on("click",$.proxy(function(){this._useAutoComplete()},this)),$(document).on("click",$.proxy(function(){this.hideResultList()},this))},_applyTemplate:function(t,e){return tui.util.forEach(e,function(e,i){"subject"===i&&(e=this._highlight(e)),t=t.replace(new RegExp("@"+i+"@","g"),e)},this),t},_highlight:function(t){var e,i=this.autoCompleteObj.queries;return tui.util.forEach(i,function(i){e||(e=t),e=this._makeStrong(e,i)},this),e||t},_makeStrong:function(t,e){var i,s;return!e||e.length<1?t:(i=e.replace(u,"").split(""),i=n(i,function(t){return a.test(t)?"\\"+t:t}),s=new RegExp(i.join(r),"gi"),t.replace(s,function(t){return"<strong>"+t+"</strong>"}))},_getFirst:function(){return this._orderStage(this.flowMap.FIRST)},_getLast:function(){return this._orderStage(this.flowMap.LAST)},_orderStage:function(t){var e=this.$resultList.children();return t=t===this.flowMap.FIRST?"first":"last",e[t]()},_getNext:function(t){return this._orderElement(this.flowMap.NEXT,t)},_getPrev:function(t){return this._orderElement(this.flowMap.PREV,t)},_orderElement:function(t,e){var i;return t===this.flowMap.NEXT?(i=e.next(),i.length?i:this._getFirst()):(i=e.prev(),i.length?i:this._getLast())},_useAutoComplete:function(){var t=this.autoCompleteObj.isUseAutoComplete();this.changeOnOffText(t),this.autoCompleteObj.setCookieValue(!t)},_showBottomArea:function(){this.$onOffTxt&&this.$onOffTxt.show()},_hideBottomArea:function(){this.$onOffTxt&&this.$onOffTxt.hide()},_setSubmitOption:function(t){var e=t?$(t).closest("li"):this.$selectedElement,i=e.data("params"),s=e.data("index"),o=this.options.listConfig[s],n=this.options.actions[o.action],a=this.options.formElement;a.attr("action",n),this._clearSubmitOption(),this.autoCompleteObj.setParams(i,s),this.autoCompleteObj.fire("change",{index:s,action:n,params:i})},_clearSubmitOption:function(){var t=this.options.formElement;t.find(".hidden-inputs").html("")},_onMouseOver:function(t){var e=$(t.target),i=this.$resultList.find("li"),s=e.closest("li");i.removeClass(this.mouseOverClass),s.find(".keyword-field").length&&s.addClass(this.mouseOverClass),this.$selectedElement=e},_onClick:function(t){var e=$(t.target),i=this.options.formElement,s=e.closest("li"),o=s.find(".keyword-field"),n=o.text();this.autoCompleteObj.setValue(n),n&&(this._setSubmitOption(e),i.submit())}});e.exports=l},{}]},{},[1]);